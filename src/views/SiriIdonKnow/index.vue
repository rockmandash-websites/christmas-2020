<template>
  <div :class="styles.container">
    <div ref="innerContainer" :class="styles.innerContainer">
      <svg
        ref="iDontKnowRef"
        :class="styles.iDontKnow"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 1115.23 165.28"
      >
        <g>
          <g>
            <rect width="1115.23" height="165.28" rx="36.59" fill="#463a38" />
            <path
              d="M115.39,76.27h-7v35.3c0,3.36-.87,4.82-3,5.77s-5.56,1-11.48,1a22.79,22.79,0,0,0-2-5.19c4.38.14,8.33.14,9.43.07s1.75-.44,1.75-1.68V76.27H85.79V72H49.54V67.28H60.72V63.55l-3.44,2.34a47.55,47.55,0,0,0-6.72-9.72L54,54a40.06,40.06,0,0,1,6.72,9.14V51.64H65.1V67.28h5.63V51.64h4.46V63.48a77.4,77.4,0,0,0,6.65-9.43l4.39,2.41c-2.63,3.36-5.7,7.09-8.12,9.57l-2.92-1.75v3h11v3.87h17V51.85h5.26v19.3h7ZM70.51,107.48c5-.73,10.24-1.39,15.35-2.12l.15,4.82c-12.72,1.83-26.31,3.73-35.67,5l-.8-5.19c4.38-.51,9.86-1.17,15.86-2V99.44H53.85V94.9H65.4V87.45H52V82.84H70.88a79.52,79.52,0,0,0,4.9-10.45l4.82,1.76c-1.54,2.92-3.22,6.06-4.82,8.69H84v4.61H70.51V94.9H82.43v4.54H70.51ZM59.77,72.17a31.41,31.41,0,0,1,5.7,8.26l-4,2.27a35.41,35.41,0,0,0-5.55-8.55Zm34.5,28.14c-.73-4.46-3.44-11.4-6.43-16.73L92.37,82c3.07,5.26,5.92,12.06,6.72,16.52Z"
              fill="#fff"
            />
            <path
              d="M163.63,62.16c-1.6,2.7-3.36,5.34-5.19,8v48h-5.77V77.51a93.87,93.87,0,0,1-26.46,21.27A37.28,37.28,0,0,0,122.56,94a84.83,84.83,0,0,0,34.13-31.87H124.38V56.75H186.8v5.41Zm.3,12.21c8.48,5.48,19.58,13.66,24.92,19.22l-4.31,4.16c-5.19-5.55-16-14.17-24.63-19.87Z"
              fill="#fff"
            />
            <path
              d="M216,109.08c4.31,1.61,9.72,2.12,16.67,2.12,3.5.08,25.72.08,30.18-.14a19.35,19.35,0,0,0-2.26,5.41H232.71c-15.42,0-24.12-2.49-29.46-12.43-.87,5.85-2.19,10.82-4.38,14.91a42.58,42.58,0,0,0-4.53-2.63c4.24-7.31,5-18.86,5.26-31.87l5.11.37c-.07,3.51-.21,6.94-.43,10.16,1.6,5.11,3.72,8.69,6.65,11.18V78.75h-15v-4.9h13.67v-9.2H197.77V59.82h11.84V51.71h5.19v8.11h10.53v4.83H214.8v9.2h12.28v4.9H216V89.57h10.45v4.82H216ZM240,106.45c-7,0-9.14-1.82-9.14-8.77V55.07h27.19V81.46H236.14V97.68c0,3.14.66,3.8,4.32,3.8h12.93c3.15,0,3.66-1.82,4.1-10.16a13.27,13.27,0,0,0,4.89,2.12c-.8,9.94-2.34,13-8.77,13Zm-3.88-46.56V76.63h16.67V59.89Z"
              fill="#fff"
            />
            <path
              d="M294.18,95.12c5.63-2.33,8.84-5.77,9.21-10.74a7.37,7.37,0,0,1-1.24.07c-3,0-5.48-1.75-5.48-5.19S299.22,74,302.22,74c4,0,6.21,3.29,6.21,8.41,0,7.89-5,13.88-12.64,16.59Z"
              fill="#fff"
            />
            <path
              d="M403.75,83.58A73.64,73.64,0,0,1,391,100.75c2.78,7.68,6.07,12.35,9.72,12.35,2,0,2.85-3.72,3.29-13.08a13.33,13.33,0,0,0,4.6,2.92c-1,12.06-2.92,15.57-8.4,15.57-5.78,0-10.16-5.11-13.52-13.67a75.9,75.9,0,0,1-15.42,10.75,20.25,20.25,0,0,0-3.73-4.31,72.35,72.35,0,0,0,17.32-11.84,137.25,137.25,0,0,1-4.09-21.2H363.62V89.93c4.31-1,8.77-1.9,13.08-2.85l.37,4.9c-4.46,1.1-9,2.12-13.45,3.14v16.23c0,3.51-.88,5.12-3.14,6s-6.21,1-12.14,1a25.26,25.26,0,0,0-2-5.49c4.68.22,9,.15,10.23.08s1.76-.37,1.76-1.68V96.44c-5.49,1.17-10.75,2.41-15.13,3.36l-1.54-5.48c4.39-.73,10.31-2,16.67-3.29V78.24H342.64V73.05h15.65V61.43c-4.54.88-9.14,1.61-13.45,2.19a19.88,19.88,0,0,0-1.76-4.53c10.24-1.53,22-4,28.87-6.58L375.83,57a100.4,100.4,0,0,1-12.21,3.36V73.05h16.74c-.66-6.65-.95-13.67-1-20.83h5.55c0,7.31.29,14.33.88,20.83h21.48v5.19h-20.9a127.39,127.39,0,0,0,3,16.66,62.74,62.74,0,0,0,9.57-13.3Zm-2.63-14.77a73.15,73.15,0,0,0-11.48-12.42l4.17-2.85A77.45,77.45,0,0,1,405.5,65.67Z"
              fill="#fff"
            />
            <path
              d="M456,62.16c-1.61,2.7-3.36,5.34-5.19,8v48h-5.77V77.51a93.87,93.87,0,0,1-26.46,21.27A36.47,36.47,0,0,0,414.93,94a84.86,84.86,0,0,0,34.14-31.87H416.76V56.75h62.42v5.41Zm.29,12.21c8.48,5.48,19.59,13.66,24.93,19.22l-4.31,4.16c-5.19-5.55-16-14.17-24.64-19.87Z"
              fill="#fff"
            />
            <path
              d="M508.49,78.46c0,.73,0,1.61-.07,2.48h13.74v5.19h-14c-.15,1.61-.44,3.29-.73,4.9,3.43,3.44,12.28,13.3,14.54,15.86l-3.65,4.61c-2.49-3.59-8.19-10.46-12.13-14.91A39.88,39.88,0,0,1,491,118.15a18.15,18.15,0,0,0-3.81-4c11.12-7.9,14.55-18.42,15.5-28H488V80.94h15.06V66.4h-5.56a54,54,0,0,1-5.92,11.48,28,28,0,0,0-4.46-3.15c4.31-5.63,7.31-14.32,9.06-23.17l5.27,1a77.45,77.45,0,0,1-2.27,8.77H520v5H508.49Zm42.1-20.54v57.6h-5.41v-5H529.76v5.78H524.5V57.92Zm-5.41,47.44V63H529.76v42.32Z"
              fill="#fff"
            />
            <path
              d="M578.67,86.5a90.54,90.54,0,0,1-6,18.86c1.39.8,3.14,2.19,5.85,3.8,5.19,3.14,11.77,3.65,20.46,3.65,9.36,0,21.2-.73,29.39-1.53a19.08,19.08,0,0,0-1.69,5.62c-5.4.37-19.22.81-27.92.81-9.64,0-16-.81-21.34-4-3-1.76-5.7-4.24-7.31-4.24s-4.09,4.6-6.28,9.21l-3.73-4.9c2.63-3.65,5.12-6.65,7.31-8.11a62.39,62.39,0,0,0,5.26-15.2h-9.5c2-4.32,4.24-10.53,6.21-16.3h-8.11v-4.9h15c-1.82,5.26-4.09,11.4-6,16.45h5l.95-.22ZM568.8,65.38c-.88-3.15-2.49-8.19-3.73-12L569.89,52c1.25,3.8,2.93,8.55,3.88,11.7Zm29.31,6.21c.58-1.83,1.17-4,1.6-5.85H580.49V61.21H592.7A39.67,39.67,0,0,0,588,53.54l4.31-1.76a34.92,34.92,0,0,1,5.12,8l-3.07,1.46h13.08A60.12,60.12,0,0,0,613,51.64l5.26,1.53c-1.75,2.63-3.58,5.63-5.34,8h13.6v4.53H605.71c-.81,2.05-1.68,4-2.41,5.85h17.1v34.13H586.49V71.59Zm16.95,4.09H591.6v6h23.46Zm0,9.8H591.6v6.14h23.46Zm0,9.94H591.6v6.14h23.46Z"
              fill="#fff"
            />
            <path
              d="M655.78,53a74.3,74.3,0,0,1-6.43,10.46v29.6h-5.26V70a68.37,68.37,0,0,1-7,6.87,38.22,38.22,0,0,0-3.58-4.24A64.84,64.84,0,0,0,651,51.42Zm-21.34,60a72.24,72.24,0,0,0,7.38-15.79l4.9,2.05c-1.9,4.75-4.46,11.62-7.17,16.08Zm43.49-1.1c4,0,4.67-1.09,5-8.47a13.81,13.81,0,0,0,5,2c-.73,9.21-2.48,11.48-9.72,11.48H660.82c-8.55,0-10.81-1.54-10.81-7.46V96.88h5.4v12.57c0,2.12.88,2.48,5.71,2.48ZM665,63.18a48.63,48.63,0,0,1-7.6,9.8,32.56,32.56,0,0,0-4.1-3.44c5-4.31,9.21-11,11.63-17.83L670,53c-.73,1.83-1.54,3.66-2.41,5.48h27.33l.88-.22,3.73,1a127.53,127.53,0,0,1-5.92,12.06l-4.61-1c1-1.9,2.34-4.54,3.51-7.17Zm4.82,9.87a49,49,0,0,1-10,15.28,27.64,27.64,0,0,0-4.09-3.07,37.45,37.45,0,0,0,9.13-13.6Zm1.46,33.48c-1.82-3.51-6.35-9-10.3-12.87l4.16-2.34c4,3.73,8.63,8.92,10.68,12.5Zm9.58-13.74h-5.19V65.89h5.19Zm8.48-21.27a65.33,65.33,0,0,1,9.21,14.39l-4.68,2.49a68.39,68.39,0,0,0-8.92-14.84ZM691.45,96c3.43,5.19,6.87,11.91,8.11,16.37l-5.19,2.12c-1-4.46-4.38-11.47-7.67-16.66Z"
              fill="#fff"
            />
            <path
              d="M772.14,62.89v5.19H732.31A96.11,96.11,0,0,1,723.47,83v35.08h-5.34V89.42a54.16,54.16,0,0,1-8.48,7.38,22.77,22.77,0,0,0-2.78-4.89c8.34-5.92,14.77-14.55,19.3-23.83H708.63V62.89h20a99.16,99.16,0,0,0,3.88-11.33L738,53c-1,3.29-2.19,6.65-3.51,9.94ZM752.85,111.5h19.29v5.11H728.22V111.5h19.22V91H731.07V85.84h16.37v-14h5.41v14h16.44V91H752.85Z"
              fill="#fff"
            />
            <path
              d="M805.55,68.45H780.12V64h25.43Zm-2,45.46H787.64v3.43h-4.82V92.79h20.76Zm-.66-36H783V73.56h19.88ZM783,83.06h19.88v4.32H783Zm4.6,14.26v12.06H798.9V97.32Zm4.68-34a54.12,54.12,0,0,0-4.46-9.87l4.53-1.53a48.83,48.83,0,0,1,4.76,9.65Zm47.95,49c1.53,0,1.83-1.1,2-8.63a15.34,15.34,0,0,0,4.76,2c-.59,9.21-2,11.55-6.14,11.55h-6c-5,0-6.21-1.61-6.21-6.94V92.86H823c-1.1,11.47-4.1,20.61-15,25.8a15.33,15.33,0,0,0-3.29-4.17c9.58-4.24,12.06-12.06,13-21.63h-6.21V71.37c-1.24,1.39-2.41,2.63-3.65,3.8a34.07,34.07,0,0,0-4.1-3.73,51.42,51.42,0,0,0,13.53-18.78l5,1.53A69.24,69.24,0,0,1,811.54,71.3h28.14V92.86h-5.62v17.39c0,1.76.21,2,1.75,2ZM816.66,88h17.69V76.19H816.66Zm26.09-13.3c-2.92-5.48-9.43-14.1-15.2-20.32l3.87-2.48c5.71,6.14,12.5,14.4,15.43,19.88Z"
              fill="#fff"
            />
            <path
              d="M876.45,53.46a111,111,0,0,1-7.16,14.91v49.85H864V76.85a92.17,92.17,0,0,1-8,9.8,45.63,45.63,0,0,0-3.07-5.34c7.31-7.16,14.25-18.2,18.42-29.46ZM919.5,82H899.84v36.33h-5.48V82H874V76.71h20.39V52.37h5.48V76.71H919.5Z"
              fill="#fff"
            />
            <path
              d="M936.9,62.16V78c0,11.62-.87,29.09-6.57,40.85a19.83,19.83,0,0,0-4.24-3.21c5.18-11.11,5.62-26.68,5.62-37.64V57.34h27.85c-.44-1.61-1-3.44-1.53-5l5.33-1a48.3,48.3,0,0,1,2.19,6h26v4.82Zm8.55,17.1c0,4-.58,8.48-4.38,11.84a13.44,13.44,0,0,0-2.92-2.41c3.36-2.48,3.8-6.5,3.8-9.57V75.83h3.5Zm33.33,21.35c4,4.67,8.92,11.25,11.55,15l-4.16,2.41c-.88-1.38-2-3.07-3.37-5-36.25,2.78-39.76,2.93-42,3.73a40.6,40.6,0,0,0-1.32-4.75c2-.15,4.75-1.32,8.41-3.14a117.84,117.84,0,0,0,10.81-5.85c-11.62.66-13.37,1-14.61,1.32a34.73,34.73,0,0,0-1.25-4.39,12.77,12.77,0,0,0,4.53-2,75.9,75.9,0,0,0,13.16-9.65l3.87,2.34a79.65,79.65,0,0,1-13.3,9.28l13.67-.58c3.44-2.2,6.94-4.68,10.16-7.17l4.24,2.85A179.23,179.23,0,0,1,952,111.2l27.92-2c-1.68-2.27-3.51-4.53-5.12-6.58ZM949.47,90v-17h-9.21V68.74h9.21V64.57h4.32v4.17h9.35v4.31h-9.35V90Zm10.6-2.34c-2.7,0-3.29-1.24-3.29-4.24V76.12h3.44V83.5c0,1.32.07,1.61.73,1.61h.66a12.63,12.63,0,0,0,2.19-.22l.22,2.56a7.73,7.73,0,0,1-2.34.22ZM971,79c0,3.73-.59,8-4,11a11.32,11.32,0,0,0-2.93-2.33c3-2.27,3.51-6,3.51-8.77v-3H971Zm3.65,10.67V73.05h-9.5V68.74h9.5V64.57H979v4.17h11.33v4.31H979V89.64Zm14.18-3.73a10.85,10.85,0,0,0,2.7-.29c0,.88.08,1.83.15,2.71a9.26,9.26,0,0,1-2.7.22H985.8c-3.07,0-3.58-1.32-3.58-4.46V75.68h3.43v8.48c0,1.39.08,1.75,1,1.75Z"
              fill="#fff"
            />
          </g>
        </g>
      </svg>

      <img :class="styles.siriAnimation" :src="images.siriAnimation" />
    </div>
  </div>
</template>

<script lang="ts">
import Vue from "vue";
import { css } from "@emotion/css";
import siriAnimation from "@/views/Siri/siriAnimation.gif";
import { gsap } from "gsap";
import Mousetrap from "mousetrap";
import siriSound from "./siriSound";

export default Vue.extend({
  data() {
    return {
      mainTl: gsap.timeline({
        paused: true,
      }),
      currentMessageIndex: 0,
    };
  },
  computed: {
    styles() {
      return {
        container: css`
          width: 100vw;
          height: 100vh;
          background-color: #190c40;
        `,
        innerContainer: css`
          opacity: 0;
        `,
        siriAnimation: css`
          position: absolute;
          bottom: 0;
          left: 50%;
          height: 450px;
          transform: translateX(-50%);
        `,
        iDontKnow: css`
          position: absolute;
          bottom: 380px;
          left: 50%;
          width: 960px;
          transform: translateX(-50%);
          z-index: 2;
          filter: drop-shadow(0px 0px 17px #000000);
        `,
      };
    },
    images() {
      return {
        siriAnimation,
      };
    },
  },
  beforeDestroy() {
    Mousetrap.unbind("right");
    Mousetrap.unbind("1");
    this.mainTl.kill();
  },
  mounted() {
    gsap.to(this.$refs.innerContainer, { opacity: 1, duration: 1 });

    this.mainTl
      .from(
        this.$refs.iDontKnowRef,
        {
          opacity: 0,
          duration: 0.1,
          onComplete: () => {
            siriSound.siriIdonKnowSound.play();
          },
        },
        0
      )
      .addLabel("message1");

    Mousetrap.bind("right", () => {
      if (this.currentMessageIndex < 1) {
        this.currentMessageIndex += 1;
        this.mainTl.tweenTo(`message${this.currentMessageIndex}`);
      }
    });

    Mousetrap.bind("1", () => {
      this.currentMessageIndex = 0;
      this.mainTl.pause(0);
    });
  },
});
</script>
